<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public · CrystalNets.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">CrystalNets.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Mini-tutorials</span><ul><li><a class="tocitem" href="../../man/visualization/">Visualization</a></li><li><a class="tocitem" href="../../man/database/">Database studies</a></li><li><a class="tocitem" href="../../man/clustering/">Clustering options</a></li><li><a class="tocitem" href="../../man/archive/">Custom archive</a></li></ul></li><li><a class="tocitem" href="../../faq/">Common issues</a></li><li><span class="tocitem">Library</span><ul><li class="is-active"><a class="tocitem" href>Public</a><ul class="internal"><li><a class="tocitem" href="#Main-types"><span>Main types</span></a></li><li><a class="tocitem" href="#Main-functions"><span>Main functions</span></a></li><li><a class="tocitem" href="#Options"><span>Options</span></a></li><li><a class="tocitem" href="#Archive"><span>Archive</span></a></li><li><a class="tocitem" href="#Other-utilities"><span>Other utilities</span></a></li></ul></li><li><a class="tocitem" href="../internals/">Internals</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href>Public</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Public</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/coudertlab/CrystalNets.jl/blob/master/docs/src/lib/public.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Main-types"><a class="docs-heading-anchor" href="#Main-types">Main types</a><a id="Main-types-1"></a><a class="docs-heading-anchor-permalink" href="#Main-types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.CrystalNet" href="#CrystalNets.CrystalNet"><code>CrystalNets.CrystalNet</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CrystalNet{D,T&lt;:Real}</code></pre><p>Representation of a net as a topological abstraction of a crystal.</p><p><code>D</code> is the dimensionality of the net, which is the number of repeated dimensions of a single connex component. This dimensionality is not necessarily the dimension of the space the crystal is embedded into, which would always be 3 for real space.</p><p><code>T</code> is the numeric type used to store the exact coordinates of each vertex at the equilibrium placement.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/types.jl#L900-L911">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.UnderlyingNets" href="#CrystalNets.UnderlyingNets"><code>CrystalNets.UnderlyingNets</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">UnderlyingNets</code></pre><p>Grouping of the connected components of a structure according to their dimensionality.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/types.jl#L1053-L1057">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.TopologicalGenome" href="#CrystalNets.TopologicalGenome"><code>CrystalNets.TopologicalGenome</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">TopologicalGenome</code></pre><p>A topological genome computed by <code>CrystalNets.jl</code>.</p><p>Store both the actual genome (as a <code>PeriodicGraph</code>) and the name of the net, if recognized.</p><p>Like for a <code>PeriodicGraph</code>, the textual representation of a <code>TopologicalGenome</code> can be parsed back into a <code>TopologicalGenome</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; topology = topological_genome(CrystalNet(PeriodicGraph(&quot;2  1 2 0 0  2 1 0 1  2 1 1 0&quot;)))
hcb

julia&gt; typeof(topology)
TopologicalGenome

julia&gt; topology.genome  # The actual topological genome, as a PeriodicGraph
PeriodicGraph2D(2, PeriodicEdge2D[(1, 2, (-1,0)), (1, 2, (0,0)), (1, 2, (0,1))])

julia&gt; parse(TopologicalGenome, &quot;hcb&quot;) == topology
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/types.jl#L1255-L1277">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.TopologyResult" href="#CrystalNets.TopologyResult"><code>CrystalNets.TopologyResult</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">TopologyResult</code></pre><p>The result of a topology computation on a structure with different <a href="#CrystalNets.Clustering"><code>Clustering</code></a> options.</p><p>Its representation includes the name of the clustering options along with their corresponding genome. It is omitted if there is only one clustering option which is <a href="#CrystalNets.Clustering"><code>Auto</code></a>.</p><p>Like for a <a href="#CrystalNets.TopologicalGenome"><code>TopologicalGenome</code></a> (or a <code>PeriodicGraph</code>), the textual representation of a <code>TopologyResult</code> can be parsed back to a <code>TopologyResult</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; mof5 = joinpath(dirname(dirname(pathof(CrystalNets))), &quot;test&quot;, &quot;cif&quot;, &quot;MOF-5.cif&quot;);

julia&gt; topologies = determine_topology(mof5, structure=StructureType.MOF, clusterings=[Clustering.Auto, Clustering.Standard, Clustering.PE])
AllNodes, SingleNodes: pcu
Standard: xbh
PE: cab

julia&gt; typeof(topologies)
TopologyResult

julia&gt; parse(TopologyResult, repr(topologies)) == topologies
true</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/types.jl#L1327-L1353">source</a></section></article><h2 id="Main-functions"><a class="docs-heading-anchor" href="#Main-functions">Main functions</a><a id="Main-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Main-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.determine_topology" href="#CrystalNets.determine_topology"><code>CrystalNets.determine_topology</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">determine_topology(path, options::Options)
determine_topology(path; kwargs...)</code></pre><p>Compute the topology of the structure described in the file located at <code>path</code>. This is essentially equivalent to calling <code>recognize_topology(topological_genome(UnderlyingNets(parse_chemfile(path, options))))</code>. In the case where the structure is not made of interpenetrating nets, return the name of the only net.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/query.jl#L163-L172">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.determine_topology_dataset" href="#CrystalNets.determine_topology_dataset"><code>CrystalNets.determine_topology_dataset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">determine_topology_dataset(path, save, autoclean, options::Options)
determine_topology_dataset(path, save=true, autoclean=true; kwargs...)</code></pre><p>Given a path to a directory containing structure input files, compute the topology of each structure within the directory. Return a dictionary linking each file name to the result. The result is a <a href="#CrystalNets.TopologyResult"><code>TopologyResult</code></a>, containing the topological genome, the name if known and the stability of the net. In case of error, the exception is reported.</p><p>It is strongly recommended to toggle warnings off (through <a href="#CrystalNets.toggle_warning"><code>toggle_warning</code></a>) and not to export any file since those actions may critically reduce performance, especially for numerous files.</p><p>If <code>save</code> is set, the result is also stored in a julia serialized file located at &quot;<span>$</span>path/../results_<span>$</span>i&quot; where <code>i</code> is the lowest integer such that this path does not already exist at the start of the computation. While processing, this path will be used to create a directory storing the current state of the computation: to continue an interrupted computation, simply pass this temporary directory as the path. If <code>autoclean</code> is set, this directory is removed at the end if the computation was successful.</p><p>If <code>save</code> is set and <code>autoclean</code> is unset, the directory of temporary files will be renamed into &quot;<span>$</span>path/../results_<span>$</span>i.OLD<span>$</span>j&quot;.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/query.jl#L318-L342">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.guess_topology" href="#CrystalNets.guess_topology"><code>CrystalNets.guess_topology</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">guess_topology(path, options::Options)
guess_topology(path; kwargs...)</code></pre><p>Tries to determine the topology of the file at <code>path</code> by passing various options (starting from the provided options if any) until finding a known topology. If none is found, return the topological genome encountered most often through the variation of options.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/query.jl#L216-L224">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.guess_topology_dataset" href="#CrystalNets.guess_topology_dataset"><code>CrystalNets.guess_topology_dataset</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">guess_topology_dataset(path, save, autoclean, options::Options)
guess_topology_dataset(path, save=true, autoclean=true; kwargs...)</code></pre><p>Given a path to a directory containing structure input files, guess the topology of each structure within the directory using <a href="#CrystalNets.guess_topology"><code>guess_topology</code></a>. Return a dictionary linking each file name to the result. The result is the corresponding topology name, if known, or the topological genome preceded by an &quot;UNKNOWN&quot; mention otherwise. In case of error, the result is the exception preceded by a &quot;FAILED with&quot; mention. Finally, if the input does not represent a periodic structure, the result is &quot;non-periodic&quot;.</p><p>It is strongly recommended to toggle warnings off (through <a href="#CrystalNets.toggle_warning"><code>toggle_warning</code></a>) and not to export any file since those actions may critically reduce performance, especially for numerous files.</p><p>The <code>save</code> and <code>autoclean</code> arguments work identically to their counterpart for <a href="#CrystalNets.determine_topology_dataset"><code>determine_topology_dataset</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/query.jl#L448-L466">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.parse_chemfile" href="#CrystalNets.parse_chemfile"><code>CrystalNets.parse_chemfile</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">   parse_chemfile(path, options::Options)
   parse_chemfile(path; kwargs...)</code></pre><p>Parse a file given in any recognised chemical format and extract the topological information. Such format can be .cif or any file format recognised by Chemfiles.jl that contains all the necessary topological information.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/input.jl#L1105-L1113">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.topological_genome" href="#CrystalNets.topological_genome"><code>CrystalNets.topological_genome</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">topological_genome(net::CrystalNet{D,T})::String where {D,T}</code></pre><p>Compute the topological genome of a net. The topological genome is an invariant if the net, meaning that it does not depend on its representation. It is also the string representation of a D-periodic graph such that <code>PeriodicGraph{D}(topological_genome(net))</code> is isomorphic to <code>net.graph</code> (except possibly if the <code>ignore_types</code> option is unset).</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Options must be passed directly within <code>net</code>.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/query.jl#L3-L14">source</a></section><section><div><pre><code class="nohighlight hljs">topological_genome(g::Union{String,PeriodicGraph}, options::Options=Options())
topological_genome(g::Union{String,PeriodicGraph}; kwargs...)</code></pre><p>Compute the topological genome of a periodic graph. If given a topological key (as a string), it is converted to a <code>PeriodicGraph</code> first.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/query.jl#L68-L74">source</a></section><section><div><pre><code class="nohighlight hljs">topological_genome(group::UnderlyingNets)::Vector{Tuple{Vector{Int},String}}</code></pre><p>Compute the topological genome of each subnet stored in <code>group</code>.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Options must be passed directly within the subnets.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/query.jl#L122-L129">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.recognize_topology" href="#CrystalNets.recognize_topology"><code>CrystalNets.recognize_topology</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">recognize_topology(g::PeriodicGraph, arc=CRYSTAL_NETS_ARCHIVE)
recognize_topology(genome::AbstractString, arc=CRYSTAL_NETS_ARCHIVE)</code></pre><p>Attempt to recognize a topological genome from an archive of known genomes.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This function does a simple lookup, not any kind of topology computation. To identify the topology of a <code>PeriodicGraph</code> or a <code>CrystalNet</code> <code>x</code>, query <code>topological_genome(x)</code> instead.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/query.jl#L145-L155">source</a></section></article><h2 id="Options"><a class="docs-heading-anchor" href="#Options">Options</a><a id="Options-1"></a><a class="docs-heading-anchor-permalink" href="#Options" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.Options" href="#CrystalNets.Options"><code>CrystalNets.Options</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Options</code></pre><p>Different options, passed as keyword arguments.</p><p><strong>Basic options</strong></p><ul><li><code>name</code>: a name for the structure.</li><li><code>bonding</code>: one of the <a href="#CrystalNets.Bonding"><code>Bonding</code></a> options. Default is <code>Bonding.Auto</code>.</li><li><code>structure</code>: one of the <a href="#CrystalNets.StructureType"><code>StructureType</code></a> options. Default is <code>StructureType.Auto</code>.</li><li><code>clusterings</code>: a list of <a href="#CrystalNets.Clustering"><code>Clustering</code></a> options. Default is <code>[Clustering.Auto]</code>.</li></ul><p><strong>Exports</strong></p><p>For each export option, the accepted values are either a string, indicating the path to the directory in which to store the export, or a boolean, specifying whether or not to do the export. If the value is <code>true</code>, a path will be automatically determined. An empty string is equivalent to <code>false</code>.</p><ul><li><code>export_input</code>: the parsed structure, as a .vtf</li><li><code>export_trimmed</code>: the parsed structure after iteratively removing all atoms having only one neighbour, as a .vtf</li><li><code>export_attributions</code>: the attribution of vertices into SBUs, as a .pdb. Only relevant for the <code>MOF</code> <a href="#CrystalNets.StructureType"><code>StructureType</code></a>.</li><li><code>export_clusters</code>: the clustering of vertices, as a .vtf</li><li><code>export_net</code>: the overall extracted net on which the topology is computed, as a .vtf.</li><li><code>export_subnets</code>: each connected component of the overall net as a separate .vtf file. These subnets are defined after grouping vertices according to their <a href="#CrystalNets.Clustering"><code>Clustering</code></a>.</li></ul><p><strong>Other options</strong></p><ul><li><code>ignore_atoms</code>: set of atom symbols to ignore (for instance <code>[:C,:H]</code> will remove carbohydrate solvent residues).</li><li><code>ignore_types</code>: disregard atom types to compute the topology, making pcu and pcu-b identical for example (default is true)</li><li><code>cutoff_coeff</code>: coefficient used to detect bonds. Default is 0.75, higher values will include bonds that were considered too long before.</li><li><code>skip_minimize</code>: assume that the cell is already the unit cell (default is false).</li><li><code>dimensions</code>: the set of crystal net dimensions to consider. For instance, putting <code>Set(3)</code> will ensure that only 3-dimensional nets are considered. Default is <code>Set([1,2,3])</code>.</li><li><code>cluster_kinds</code>: a <a href="#CrystalNets.ClusterKinds"><code>ClusterKinds</code></a>. Default separates organic and inorganic SBUs.</li><li><code>ignore_homoatomic_bonds</code>: a <code>Set{Symbol}</code> such that all X-X bonds of the net are removed if X is an atom whose type is in <code>ignore_homoatomic_bonds</code>.</li><li><code>max_polyhedron_radius</code>: an integer specifying the maximum number of bonds between two corners of the coordination polyhedron built for the <a href="#CrystalNets.Clustering"><code>Clustering.PE</code></a> option. Default is 4.</li></ul><p><strong>Miscellaneous options</strong></p><p>These boolean options have a default value that may be determined by <a href="#CrystalNets.Bonding"><code>Bonding</code></a>, <a href="#CrystalNets.StructureType"><code>StructureType</code></a> and <a href="#CrystalNets.Clustering"><code>Clustering</code></a>. They can be directly overriden here.</p><ul><li><code>bond_adjacent_sbus</code>: bond together SBUs which are only separated by a single C atom.</li><li><code>authorize_pruning</code>: remove colliding atoms in the input. Default is true.</li><li><code>wider_metallic_bonds</code>: for bond detections, metals have a radius equal to 1.5× their Van der Waals radius. Default is false, unless <a href="#CrystalNets.StructureType"><code>StructureType</code></a> is <code>MOF</code> or <code>Zeolite</code>.</li><li><code>ignore_homometallic_bonds</code>: do not bond two metallic atoms of the same type if they are up to third neighbours anyway. Default is false, unless <a href="#CrystalNets.StructureType"><code>StructureType</code></a> is <code>MOF</code>.</li><li><code>ignore_metal_cluster_bonds</code>: do not bond two metallic clusters together if they share at least one non-metallic neighbour. Default is false.</li><li><code>ignore_low_occupancy</code>: atoms with occupancy lower than 0.5 are ignored. Default is false.</li><li><code>detect_paddlewheels</code>: detect paddle-wheel pattern and group them into an inorganic vertex. Default is true.</li><li><code>detect_organiccycles</code>: detect organic cycles and collapse all belonging C atoms into a new vertex. Default is true.</li><li><code>detect_pe</code>: detect organic points-of-extension (organic atoms bonded to another SBU) and transform them into vertices. Default is true.</li><li><code>cluster_simple_pe</code>: cluster adjacent points-of-extension if they are not part of a cycle. Default is true.</li><li><code>separate_metals</code>: separate each metal atom into its own vertex (instead of grouping them to form metallic clusters if they are adjacent or bonded by an oxygen). Default is false, unless <a href="#CrystalNets.Clustering"><code>Clustering</code></a> is <code>Standard</code> or <code>PEM</code>.</li><li><code>split_O_vertex</code>: if a vertex is composed of a single O, remove it and bond together all of its neighbors. Default is true.</li><li><code>unify_sbu_decomposition</code>: apply the same rule to decompose both periodic and finite SBUs. Default is false.</li><li><code>force_warn</code>: force printing warning and information even during <code>..._dataset</code> and <code>..._topologies</code> function calls. Default is false.</li></ul><p><strong>Internal fields</strong></p><p>These fields are for internal use and should not be modified by the user:</p><ul><li><code>dryrun</code>: store information on possible options to try (for <code>guess_topology</code>).</li><li><code>_pos</code>: the positions of the centre of the clusters collapsed into vertices.</li><li><code>error</code>: store the first error that occured when building the net.</li><li><code>throw_error</code>: if set, throw the error instead of storing it in the <code>error</code> field.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/options.jl#L299-L379">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.StructureType" href="#CrystalNets.StructureType"><code>CrystalNets.StructureType</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia hljs">StructureType</code></pre><p>Selection mode for the crystal structure. This choice impacts the bond detection algorithm as well as the clustering algorithm used.</p><p>The choices are:</p><ul><li><code>Auto</code>: No specific structure information. Use Van der Waals radii for bond detection and <code>Input</code> as <a href="#CrystalNets.Clustering"><code>Clustering</code></a>, or <code>EachVertex</code> if the input does not provide residues.</li><li><code>MOF</code>: Use Van der Waals radii for non-metallic atoms and larger radii for metals. Detect organic and inorganic clusters and subdivide them according to <code>AllNodes</code> and <code>SingleNodes</code> to identify underlying nets.</li><li><code>Cluster</code>: similar to MOF but metallic atoms are not given a wider radius.</li><li><code>Zeolite</code>: Same as <code>Auto</code> but use larger radii for metals (and metalloids) and attempt to enforce that each O atom has exactly two neighbours and that they are not O atoms.</li><li><code>Guess</code>: try to identify the clusters as in <code>Cluster</code>. If it fails, fall back to <code>Auto</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/options.jl#L120-L136">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.Bonding" href="#CrystalNets.Bonding"><code>CrystalNets.Bonding</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia hljs">Bonding</code></pre><p>Selection mode for the detection of bonds. The choices are:</p><ul><li><code>Input</code>: use the input bonds. Fail if those are not specified.</li><li><code>Guess</code>: guess bonds using a variant of chemfiles / VMD algorithm.</li><li><code>Auto</code>: if the input specifies bonds, use them unless they look suspicious (too small or or too large according to a heuristic). Otherwise, fall back to <code>Guess</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/options.jl#L3-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.Clustering" href="#CrystalNets.Clustering"><code>CrystalNets.Clustering</code></a> — <span class="docstring-category">Module</span></header><section><div><pre><code class="language-julia hljs">Clustering</code></pre><p>The clustering algorithm used to group atoms into vertices.</p><p>This choice only affects the creation of a <code>UnderlyingNets</code> from a <code>Crystal</code>, not the <code>Crystal</code> itself, and in particular not the bond detection algorithm.</p><p>The basic choices are:</p><ul><li><code>Auto</code>: determined using the <a href="#CrystalNets.StructureType"><code>StructureType</code></a>.</li><li><code>Input</code>: use the input residues as vertices. Fail if some atom does not belong to a residue.</li><li><code>EachVertex</code>: each atom is its own vertex. Vertices with degree 2 or lower are iteratively collapsed into edges until all vertices have degree 3 or more.</li></ul><p>The next clustering options are designed for MOFs but may target other kinds of frameworks. In all cases, the clusters are refinements on top of already-defined clusters, such as the organic and inorganic SBUs defined by the <code>MOF</code> structure. Except for <code>AllNodes</code>, infinite clusters (such as the inorganic clusters in a rod MOF) are split into new finite clusters using heuristics.</p><ul><li><code>SingleNodes</code>: each already-defined cluster is mapped to a vertex.</li><li><code>AllNodes</code>: keep points of extension for organic clusters.</li><li><code>Standard</code>: make each metallic atom its own vertex and do not bond those together if they share a common non-metallic neighbour.</li><li><code>PE</code>: stands for Points of Extension. Keep points of extension for organic clusters, remove metallic centres and bond their surrounding points of extension</li><li><code>PEM</code>: stands for Points of Extension and Metals. Keep points of extension for organic clusters and each metal centre as a separate vertex.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/options.jl#L139-L167">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.ClusterKinds" href="#CrystalNets.ClusterKinds"><code>CrystalNets.ClusterKinds</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ClusterKinds(sbus, toclassify=Int[])</code></pre><p>Description of the different kinds of SBUs there should be when making clusters.</p><p><code>sbus</code> should be a list of set of symbols, each set containing the different elements acceptable in this SBU (an empty set designates all remaining elements). All elements of the same category of the periodic table can be grouped together by putting the name of the category. For example, <code>ClusterKinds([[:Au, :halogen, :nonmetal], [:metal, :metalloid], []])</code> means that there are three kinds of SBUs:</p><ul><li>the first kind can only hold halogens, non-metals and Au atoms</li><li>the second kind can only hold metalloids and metals (except Au)</li><li>the third kind can hold all the other elements.</li></ul><p>The list of possible categories is: :actinide, :noble (for noble gas), :halogen, :lanthanide, :metal, :metalloid and :nonmetal.</p><p><code>toclassify</code> contains the list of SBUs which are not actual SBUs but only groups of atoms waiting to be merged to a neighboring SBU. The neighboring SBU is chosen by order in the <code>sbus</code> list.</p><p>The cluster kinds used by default are <code>CrystalNets.ClusterKinds([[:metal, :actinide, :lanthanide], [:C,], [:P, :S],                            [:nonmetal, :metalloid, :halogen], [:noble]], [3, 4])</code>. This means that all atoms that are either metals, actinides or lanthanides are assigned to class 1 and all C atoms in SBUs of class 2. Afterwards, each group of adjacent P or S atoms is assigned either class 1 if any of its neighbor is of class 1, or class 2 otherwise if any of its neighbor is of class 2. If no such neighbor exist, it is assigned to class 1. Finally, each group of adjacent nonmetals, metalloids and halogens is assigned class 1 or 2 following the same rule as for P and S atoms.</p><p>At the end of the procedure, all atoms are thus given a class between <code>1</code> and <code>length(sbus)</code> which is not in <code>toclassify</code>. See also <a href="../internals/#CrystalNets.find_sbus"><code>find_sbus</code></a> for the implementation of this procedure.</p><p>To determine which SBU kind corresponds to a given atom, use <code>getindex</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; sbu_kinds = CrystalNets.ClusterKinds([[:nonmetal, :halogen], [:metal, :F]]);

julia&gt; sbu_kinds[:O] # nonmetal
1

julia&gt; sbu_kinds[:Au] # metal
2

julia&gt; sbu_kinds[:F] # specifically F
2

julia&gt; sbu_kinds[:Ne] # no given SBU kind
0</code></pre><p>If no empty set has been explicitly added to <code>sbus</code> and an element falls outside of the included categories, the returned SBU kind is 0.</p><p>An exception is made for nonmetals which are part of an aromatic heterocycle: those will be treated separately and put in the SBU of the corresponding carbons.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/options.jl#L170-L228">source</a></section></article><h2 id="Archive"><a class="docs-heading-anchor" href="#Archive">Archive</a><a id="Archive-1"></a><a class="docs-heading-anchor-permalink" href="#Archive" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.REVERSE_CRYSTAL_NETS_ARCHIVE" href="#CrystalNets.REVERSE_CRYSTAL_NETS_ARCHIVE"><code>CrystalNets.REVERSE_CRYSTAL_NETS_ARCHIVE</code></a> — <span class="docstring-category">Constant</span></header><section><div><pre><code class="language-julia hljs">const REVERSE_CRYSTAL_NETS_ARCHIVE::Dict{String,String}</code></pre><p>Reverse of <a href="../internals/#CrystalNets.CRYSTAL_NETS_ARCHIVE"><code>CRYSTAL_NETS_ARCHIVE</code></a>.</p><p>Can be used to query the topological genome of known nets, as in:</p><pre><code class="language-julia-repl hljs">julia&gt; REVERSE_CRYSTAL_NETS_ARCHIVE[&quot;dia&quot;]
&quot;3 1 2 0 0 0 1 2 0 0 1 1 2 0 1 0 1 2 1 0 0&quot;

julia&gt; topological_genome(CrystalNet(PeriodicGraph(ans)))
dia</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>It is also possible to directly access the topological genome as a <code>PeriodicGraph</code> by parsing the name as a <a href="#CrystalNets.TopologicalGenome"><code>TopologicalGenome</code></a>:</p><pre><code class="language-julia-repl hljs">julia&gt; parse(TopologicalGenome, &quot;pcu&quot;).genome
PeriodicGraph3D(1, PeriodicEdge3D[(1, 1, (0,0,1)), (1, 1, (0,1,0)), (1, 1, (1,0,0))])

julia&gt; string(parse(TopologicalGenome, &quot;nbo&quot;).genome) == REVERSE_CRYSTAL_NETS_ARCHIVE[&quot;nbo&quot;]
true</code></pre></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/archive.jl#L32-L56">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.parse_arc" href="#CrystalNets.parse_arc"><code>CrystalNets.parse_arc</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">parse_arc(file)</code></pre><p>Parse a .arc Systre archive such as the one used by the RCSR. Return a pair <code>(flag, pairs)</code>.</p><p><code>flag</code> is set if the archive corresponds to one generated by a compatible release of CrystalNets. If unset, the genomes of the archive may not be the same as those computed by CrystalNets for the same nets. <code>pairs</code> is a <code>Dict{String,String}</code> whose entries have the form <code>genome =&gt; id</code> where <code>id</code> is the name of the net and <code>genome</code> is the topological genome corresponding to this net (given as a string of whitespace-separated values parseable by <code>PeriodicGraph</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/input.jl#L269-L281">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.parse_arcs" href="#CrystalNets.parse_arcs"><code>CrystalNets.parse_arcs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">parse_arcs(file)</code></pre><p>Parse a folder containing .arc Systre archives such as the one used by the RCSR. Return a pair <code>(flag, pairs)</code> with the same convention than <a href="#CrystalNets.parse_arc"><code>parse_arc</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/input.jl#L313-L318">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.clean_default_archive!" href="#CrystalNets.clean_default_archive!"><code>CrystalNets.clean_default_archive!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">clean_default_archive!(custom_arc; validate=true, refresh=true)</code></pre><p>Erase the default archive used by CrystalNets.jl to recognize known topologies and replace it with a new one from the file located at <code>custom_arc</code>.</p><p>The <code>validate</code> parameter controls whether the new file is checked and converted to a format usable by CrystalNets.jl. If unsure, leave it set.</p><p>The <code>refresh</code> optional parameter controls whether the current archive should be replaced by the new default one.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This archive will be kept and used for subsequent runs of CrystalNets.jl, even if you restart your Julia session.</p><p>To only change the archive for the current session, use <a href="#CrystalNets.change_current_archive!"><code>change_current_archive!(custom_arc)</code></a>.</p><p>See also <a href="#CrystalNets.refresh_current_archive!"><code>refresh_current_archive!</code></a> for similar uses.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The previous default archive cannot be recovered afterwards, so make sure to keep a copy if necessary. The default archive is the set of &quot;.arc&quot; files located at /home/runner/work/CrystalNets.jl/CrystalNets.jl/archives.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/archive.jl#L136-L160">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.set_default_archive!" href="#CrystalNets.set_default_archive!"><code>CrystalNets.set_default_archive!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">set_default_archive!()</code></pre><p>Set the current archive as the new default archive.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This archive will be kept and used for subsequent runs of CrystalNets.jl, even if you restart your Julia session.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/archive.jl#L176-L184">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.empty_default_archive!" href="#CrystalNets.empty_default_archive!"><code>CrystalNets.empty_default_archive!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">empty_default_archive!(; refresh=true)</code></pre><p>Empty the default archive. This will prevent CrystalNets from recognizing any topology before they are explicitly added.</p><p>The <code>refresh</code> optional parameter controls whether the current archive should also be emptied.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>This empty archive will be kept and used for subsequent runs of CrystalNets.jl, even if you restart your Julia session. If you only want to empty the current archive, do <code>empty!(CrystalNets.CRYSTAL_NETS_ARCHIVE)</code>.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/archive.jl#L190-L203">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.change_current_archive!" href="#CrystalNets.change_current_archive!"><code>CrystalNets.change_current_archive!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">change_current_archive!(custom_arc; validate=true)</code></pre><p>Erase the current archive used by CrystalNets.jl to recognize known topologies and replace it with the archive stored in the file located at <code>custom_arc</code>.</p><p>The <code>validate</code> optional parameter controls whether the new file is checked and converted to a format usable by CrystalNets.jl. If unsure, leave it set.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This modification will only last for the duration of this Julia session.</p><p>If you wish to change the default archive and use it for subsequent runs, use <a href="#CrystalNets.clean_default_archive!"><code>clean_default_archive!</code></a>.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>Using an invalid archive will make CrystalNets.jl unusable. If this happens, simply run <a href="#CrystalNets.refresh_current_archive!"><code>refresh_current_archive!()</code></a> to revert to the default archive.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/archive.jl#L227-L246">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.refresh_current_archive!" href="#CrystalNets.refresh_current_archive!"><code>CrystalNets.refresh_current_archive!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">refresh_current_archive!()</code></pre><p>Revert the current topological archive to the default one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/archive.jl#L256-L260">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.add_to_current_archive!" href="#CrystalNets.add_to_current_archive!"><code>CrystalNets.add_to_current_archive!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_to_current_archive!(id, genome)</code></pre><p>Mark <code>genome</code> as the topological genome associated with the name <code>id</code> in the current archive.</p><p>The input <code>id</code> and <code>genome</code> are not modified by this operation.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>This modification will only last for the duration of this Julia session.</p><p>If you wish to save the archive and use it for subsequent runs, use <a href="#CrystalNets.set_default_archive!"><code>set_default_archive!</code></a> after calling this function.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/archive.jl#L274-L287">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.make_archive" href="#CrystalNets.make_archive"><code>CrystalNets.make_archive</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">make_archive(path, destination=nothing)</code></pre><p>Make an archive from the files located in the directory given by <code>path</code> and export it to <code>destination</code>, if specified. Each file of the directory should correspond to a unique topology: if a topology is encountered multiple times, it will be assigned the name of the latest file that bore it.</p><p>The archive can then be used with <a href="#CrystalNets.change_current_archive!"><code>change_current_archive!(destination; validate=false)</code></a> for instance.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/archive.jl#L317-L327">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.export_arc" href="#CrystalNets.export_arc"><code>CrystalNets.export_arc</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">export_arc(path)</code></pre><p>Export the current archive to the specified path.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/output.jl#L308-L312">source</a></section></article><h2 id="Other-utilities"><a class="docs-heading-anchor" href="#Other-utilities">Other utilities</a><a id="Other-utilities-1"></a><a class="docs-heading-anchor-permalink" href="#Other-utilities" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.toggle_warning" href="#CrystalNets.toggle_warning"><code>CrystalNets.toggle_warning</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">toggle_warning(to=nothing)</code></pre><p>Toggle warnings on (if <code>to == true</code>) or off (if <code>to == false</code>). Without an argument, toggle on and off repeatedly at each call.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/CrystalNets.jl#L50-L55">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.toggle_export" href="#CrystalNets.toggle_export"><code>CrystalNets.toggle_export</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">toggle_export(to=nothing)</code></pre><p>Toggle exports on (if <code>to == true</code>) or off (if <code>to == false</code>). Without an argument, toggle on and off repeatedly at each call.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/CrystalNets.jl#L61-L66">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CrystalNets.export_default" href="#CrystalNets.export_default"><code>CrystalNets.export_default</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">export_default(c::Union{PeriodicGraph,CrystalNet,Crystal}, obj=nothing, name=nothing, path=tempdir(); repeats=nothing)</code></pre><p>Export a VTF representation of an object at the given <code>path</code>.</p><p><code>obj</code> is a <code>String</code> describing the nature of the object, such as &quot;net&quot;, &quot;clusters&quot; or &quot;subnet&quot; for example. Default is <code>string(typeof(c))</code>.</p><p><code>name</code> is a <code>String</code> inserted in the exported file name. Default is a <a href="https://docs.julialang.org/en/v1/base/file/#Base.Filesystem.tempname"><code>tempname</code></a>.</p><p><code>repeats</code> is the maximum distance between a represented atom out of the unit cell and one inside. Default is between 2 and 6, depending on <code>obj</code> and the size of the graph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/coudertlab/CrystalNets.jl/blob/80dafaad469e4c658791246ea27d1efcda4a9c84/src/utils.jl#L79-L91">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../faq/">« Common issues</a><a class="docs-footer-nextpage" href="../internals/">Internals »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.14 on <span class="colophon-date" title="Tuesday 8 March 2022 13:21">Tuesday 8 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
